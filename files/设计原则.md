## 设计原则

### 一、Single Responsibility Principle(简称SRP):单一职责原则

定义：应该有且只有一个原因引起类的变更。

优点有：

- 可以降低类的复杂度，一个类只负责一项职责，其逻辑肯定要比负责多项职责简单的多；
- 提高类的可读性，提高系统的可维护性；
- 变更引起的风险降低，变更是必然的，如果单一职责原则遵守的好，当修改一个功能时，可以显著降低对其他功能的影响。

### 二、Liskov Substitution Principle:里氏替换原则

定义：只要父类出现的地方子类就可以出现，且替换成子类也不会出现任何错误或者异常。(但是反过来，有子类出现的地方，父类不一定可以适用)。

LSP解决如何正确进行继承设计。

里氏替换原则通俗的来讲就是：子类可以扩展父类的功能，但不能改变父类原有的功能。它包含以下4层含义：

- 子类可以实现父类的抽象方法，但不能覆盖父类的非抽象方法。
- 子类中可以增加自己特有的方法。
- 当子类的方法重载父类的方法时，方法的前置条件（即方法的形参）要比父类方法的输入参数更宽松。
- 当子类的方法实现父类的抽象方法时，方法的后置条件（即方法的返回值）要比父类更严格。

继承包含这样一层含义：父类中凡是**已经实现好的方法**（相对于抽象方法而言），实际上是在设定一系列的规范和契约，虽然它不强制要求所有的子类必须遵从这些契约，但是如果子类对这些**非抽象方法**任意修改，就会**对整个继承体系造成破坏**。而里氏替换原则就是表达了这一层含义。

### 三、Dependence Inversion Principle:依赖倒置原则

定义：高层模块不应该依赖低层模块，二者都应该依赖其抽象；抽象不应该依赖细节；细节应该依赖抽象。

依赖倒置原则基于这样一个事实：相对于细节的多变性，**抽象的东西要稳定的多**。

依赖倒置原则的核心思想是**面向接口编程**。

### 四、Interface Segregation Principle:接口隔离原则

定义：客户端不应该依赖它不需要的接口；一个类对另一个类的依赖应该建立在最小的接口上。 

很多人会觉的接口隔离原则跟之前的单一职责原则很相似，其实不然。其一，单一职责原则原注重的是职责；而接口隔离原则注重对接口依赖的隔离。其二，单一职责原则主要是约束类，其次才是接口和方法，它针对的是程序中的实现和细节；而接口隔离原则主要约束接口接口，主要针对抽象，针对程序整体框架的构建。

- 接口尽量小，但是要有限度。对接口进行细化可以提高程序设计灵活性是不挣的事实，但是如果过小，则会造成接口数量过多，使设计复杂化。所以一定要适度。
- 为依赖接口的类定制服务，只暴露给调用的类它需要的方法，它不需要的方法则隐藏起来。只有专注地为一个模块提供定制服务，才能建立最小的依赖关系。
- 提高内聚，减少对外交互。使接口用最少的方法去完成最多的事情。


### 五、Law of Demeter: 迪米特法则

定义：迪米特法则也叫做最少知识原则(Least Knowledge Principle,LKP)，一个对象应该对其他对象保持最少的了解。

就是一个类**对自己依赖的类知道的越少越好**。也就是说，对于被依赖的类来说，无论逻辑多么复杂，都尽量地的将逻辑封装在类的内部，对外除了提供的public方法，不对外泄漏任何信息。

迪米特法则还有一个更简单的定义：**只与直接的朋友通信**。首先来解释一下什么是直接的朋友：每个对象都会与其他对象有耦合关系，只要两个对象之间有耦合关系，我们就说这两个对象之间是朋友关系。耦合的方式很多，依赖、关联、组合、聚合等。其中，我们称出现成员变量、方法参数、方法返回值中的类为直接的朋友，而出现在局部变量中的类则不是直接的朋友。也就是说，陌生的类最好不要作为局部变量的形式出现在类的内部。

使用迪米特原则，虽然可以避免与非直接的类通信，但是要通信，必然会通过一个“中介”来发生联系。但过分的使用迪米特原则，会产生大量这样的中介和传递类，导致系统复杂度变大。所以在采用迪米特法则时要反复权衡，既做到结构清晰，又要高内聚低耦合。

### 六、Open Closed Principle : 开闭原则

定义：一个软件实体如类、模块和函数应该对扩展开放，对修改关闭。

其实，我们遵循设计模式前面5大原则，以及使用23种设计模式的目的就是遵循开闭原则。也就是说，只要我们对前面5项原则遵守的好了，设计出的软件自然是符合开闭原则的，这个开闭原则更像是前面五项原则遵守程度的“平均得分”，前面5项原则遵守的好，平均分自然就高，说明软件设计开闭原则遵守的好；如果前面5项原则遵守的不好，则说明开闭原则遵守的不好。

实现开闭原则的指导思想就是：

- 抽象出相对稳定的接口，这部分应该不改动或者很少改动（不易修改的部分）
- 封装变化（可扩展的部分）


### 总结

说到这里，再回想一下前面说的5项原则，恰恰是告诉我们用**抽象构建框架，用实现扩展细节**的注意事项而已：单一职责原则告诉我们实现类要职责单一；里氏替换原则告诉我们不要破坏继承体系；依赖倒置原则告诉我们要面向接口编程；接口隔离原则告诉我们在设计接口的时候要精简单一；迪米特法则告诉我们要降低耦合。而开闭原则是总纲，他告诉我们要对扩展开放，对修改关闭。


### 参考

- [设计模式六大原则](http://www.uml.org.cn/sjms/201211023.asp#2)（比较权威）
- [设计模式————6大设计原则](https://www.cnblogs.com/HouJiao/p/5459022.html)(有点局限于JAVA，不过语言简单易懂)
- [面向对象的5个设计原则](https://www.jianshu.com/p/105eeee27ba4)
- [谈谈面向对象设计(OOD)原则](https://www.jianshu.com/p/e378025920f8)