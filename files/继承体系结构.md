## 继承体系结构

### 对象的结构

|Objective-C 对象的结构图|
------|
ISA指针|
根类的实例变量|
倒数第二层父类的实例变量|
...|
父类的实例变量|
类的实例变量|

### 对象、类对象、元类对象

- 每个对象内部有一个isa指针，指向类对象
- 类对象组成
- - isa指针，指向元类对象
- - super_class，指向父类
- - ivar_list 成员变量列表（成员变量名字、在对象内存中的偏移量等信息）
- - property_list 属性列表（属性的名字、attributes等信息）
- 元类对象组成
- - isa指针，指向根元类对象
- - super_class，指向父元类对象
- - property_list 属性列表（属性的名字、attributes等信息）

<img src="../images/oc-object-structure.png" style="width:600;height:620">

### 方法执行

>objc是动态语言，每个方法在运行时会被动态转为消息发送，即：objc_msgSend(receiver, selector)。

OC在向一个对象发送消息时，runtime库会根据对象的isa指针找到该对象的类对象，然后在该类中的方法列表以及其父类方法列表中寻找方法运行。其实为了加快运行时速度，先查找方法缓存列表，没有缓存则创建，仍旧没有则向父类查询。

然后在发送消息的时候，objc_msgSend方法不会返回值，所谓的返回内容都是具体调用时执行的。 